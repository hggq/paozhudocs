<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>PaoZhu C++ Web Frameworks</title>
    <style>
        /* Light mode */
        body {
            font-family:'PingFang SC','Helvetica Neue','Microsoft YaHei UI','Microsoft YaHei','Noto Sans CJK SC',Sathu,EucrosiaUPC,Arial,Helvetica,sans-serif;
            font-size:16px;
            line-height:1.45em;
        }
        code{
            background-color: #EEE;
            border-radius: 5px;
            padding: 3px;
        }
        @media (prefers-color-scheme: light) {
        body {
            color: black;
            background-color: white;
            font-size: 14px;
        }
        body pre {
            padding: 5px;
            overflow: auto;
            line-height: 1.45em;
            background-color: #EEE;
            border-radius: 6px;
        }
 
        body pre {
            word-wrap: normal;
        }
        body pre > code {
            padding: 0;
            margin: 0;
            word-break: normal;
            white-space: pre;
            background: transparent;
            border: 0;
        }
 
        body pre > code {
            white-space: pre-wrap;
        }
        code{
            background-color: #EEE;
            border-radius: 5px;
            padding: 3px;
        }

        }

        /* Dark mode */
        @media (prefers-color-scheme: dark) {
        body {
            color: white;
            background-color: black;
        }

        body pre {
            padding: 5px;
            overflow: auto;
            line-height: 1.45em;
            background-color: #333;
            border-radius: 6px;
        }
 
        body pre {
            word-wrap: normal;
        }
        body pre > code {
            padding: 0;
            margin: 0;
            word-break: normal;
            white-space: pre;
            background: transparent;
            border: 0;
        }
 
        body pre > code {
            white-space: pre-wrap;
        }

        code{
            background-color: #333;
            border-radius: 5px;
            padding: 3px;
        }
        }

        @media (min-width: 1200px) {
            .container {
                width: 1080px;
                margin: 0 auto;
            }
        }
    </style>

</head>

<body>
    <h1 style="text-align:center;">PaoZhu C++ Web Frameworks</h1>
    <h4 style="text-align:center;"><a href="documentation.html">ä¸­æ–‡</a> <a href="documentation_en.html">English</a></h4>
    <div class="container">
        <h3><strong>ç®€ä»‹</strong></h3>
        <p>paozhuæ˜¯ä¸€æ¬¾C++ Webå¼€å‘æ¡†æ¶ï¼Œå†…ç½®HTTP/1 HTTP/2 ORM,å¯ä»¥è½»æ¾ä¼˜é›…å†™Webç¨‹åºï¼Œæ‰“ç ´ä»¥å¾€C++å†™Webç¨‹åºä¸æ–¹ä¾¿é—®é¢˜ã€‚</p>
        <p>paozhuç¼–å†™äº†Webå¼€å‘åº•å±‚è®¾æ–½ï¼Œæ¯”å¦‚å¤šåŸŸåç»‘å®šã€SSLè¯ä¹¦ç®¡ç†ã€Cookieã€Sessionã€HTMLè¡¨å•ç®¡ç† ã€URLå¤„ç†ã€æ–‡ä»¶ä¸Šä¼ ä¸‹è½½ã€HttpClientå®¢æˆ·ç«¯ã€æ•°æ®åº“è¿æ¥ORMã€WebSocketã€æ—¥å¿—ï¼Œæ¶µç›–Webå¼€å‘åŸºç¡€ã€‚</p>
        <p>æ¡†æ¶åŸºäºC++20ä¸ºåŸºç¡€ï¼Œä¸€ä¸ªæ˜¯ä½¿ç”¨æ–°æ ‡å‡†ï¼Œç¼–è¯‘å™¨æ”¯æŒå®Œæ•´ï¼Œä¸€ä¸ªæ˜¯è®©ä»£ç æ›´åŠ ç°ä»£åŒ–ï¼Œæ¡†æ¶å¼€å¯äº†ASANå’Œæ‰€æœ‰é”™è¯¯æç¤ºï¼Œæ–¹ä¾¿å¼€å‘é˜¶æ®µå‘ç°é—®é¢˜ï¼Œä¹Ÿå¯ä»¥è¿è¡Œæ—¶å€™ç»“åˆcoredumpctlå·¥å…·ï¼ŒæŸ¥çœ‹å„ä¸ªçº¿ç¨‹å†…å­˜æ ˆã€‚é…åˆæ™ºèƒ½æŒ‡é’ˆåŸºæœ¬æœç»å†…å­˜æ³„éœ²å’Œè¶Šç•Œé—®é¢˜ï¼Œæ¡†æ¶ç›®å‰åŸºæœ¬æ²¡æœ‰ç¢°åˆ°å†…å­˜æ³„éœ²æˆ–å´©æºƒæƒ…å†µã€‚</p>
        <p>paozhuä½¿ç”¨C++ï¼Œä¸»è¦æ˜¯è€ƒè™‘æ¥å…¥å¤§æ¨¡å‹ï¼ˆCUDAã€æ–‡ä»¶å­˜å‚¨ã€ç½‘ç»œã€å†…å­˜æ“ä½œï¼‰ã€å¯¹æ¯”ä¸‹GO JAVA RUSTï¼Œéƒ½ä¸æ˜¯å¾ˆå®Œç¾ï¼ŒC++ä¹Ÿä¸å®Œç¾ï¼ŒRUSTè¯­æ³•ä¸å¥½çœ‹ã€GOç®€å•ä½†æ˜¯å¤§æ¨¡å‹ç­‰æ²¡æœ‰å¾ˆæ·±åšæ–‡åŒ–ã€‚ç›®å‰ç»éªŒæ˜¯ASANå’Œcoredumpctlä¸¤ä¸ªå·¥å…·ä¹Ÿèƒ½ä¿è¯C++è´¨é‡ï¼Œæ–°ç¼–è¯‘å™¨ä¹Ÿèƒ½æç¤ºä¸€éƒ¨åˆ†ã€‚</p>
        <h3>paozhuç‰¹è‰²</h3>
        <ol>
        <li>æ”¯æŒHTTP2ã€‚</li>
        <li>å†…ç½®ORMï¼ˆè‡ªç ”MySQLåè®®ï¼‰ï¼Œæ”¯æŒåç¨‹æ¨¡å¼ã€‚</li>
        <li>å¤šåŸŸåç®¡ç†ã€SAASæ¨¡å¼æ”¯æŒã€‚</li>
        <li>IOçº¿ç¨‹å’Œä¸šåŠ¡çº¿ç¨‹åˆ†å¼€ã€‚</li>
        <li>å†…ç½®å¾®å‹å¯¹è±¡ï¼ŒJSONå¯¼å…¥å¯¼å‡ºï¼Œç±»ä¼¼è„šæœ¬è¯­è¨€ä¸­å˜é‡ã€‚</li>
        <li>å†…ç½®FastCGI æ”¯æŒPHP</li>
        </ol>
        </div>
        <div class="container">
        <h3>paozhuéœ€æ±‚ç¯å¢ƒ</h3>
        <p>paozhuæ”¯æŒ<code>MacOS</code>ã€<code>Linux</code>ã€<code>Windows</code>ç³»ç»Ÿã€‚</p>
        <p>ä¾èµ–ç¬¬ä¸‰æ–¹å¼€å‘åŒ…</p>
        <p><code>OpenSSL</code> <code>Zlib</code> <code>Brotli</code> <code>ASIO</code></p>
        <p>å¯é€‰ç¬¬ä¸‰æ–¹åŒ…</p>
        <p><code>GD</code> <code>qrencode</code></p>
        <p>æ¡†æ¶åŸºäºC++20ä»¥ä¸Šï¼Œç¡®ä¿ä½ çš„ç³»ç»Ÿæ”¯æŒçš„ç¼–è¯‘å™¨æ”¯æŒC++20ã€‚</p>
        <ul>
        <li><code>MacOS</code> å¿…é¡»<code>MacOS 11 BigSur</code>ä»¥ä¸Šï¼Œæœ€å¥½æ˜¯ <code>MacOS 14 Sonoma</code></li>
        <li><code>Ubuntu</code> å¿…é¡»æ˜¯22.04ä»¥ä¸Š</li>
        <li><code>RockyLinux</code> <code>AlmaLinux</code> å¿…é¡»æ˜¯9.1ä»¥ä¸Š</li>
        <li><code>Windows</code> å¿…é¡»æ˜¯Win10 ç¼–è¯‘å™¨æœ€å¥½19.25ä»¥ä¸Šã€‚</li>
        </ul>
    </div>
    <div class="container">
        <h3>paozhuå®‰è£…</h3>
        <p>åˆ°å®˜æ–¹githubåº“ï¼š<a href="https://github.com/hggq/paozhu" target="_blank">https://github.com/hggq/paozhu</a></p>
        <ul>
        <li><a href="macos.html" target="_blank">MacOSå®‰è£…</a> å‚è€ƒ</li>
        <li><a href="ubuntu.html" target="_blank">Ubuntuå®‰è£…</a> å‚è€ƒ</li>
        <li><a href="linux.html" target="_blank">RockyLinux AlmaLinux</a> å®‰è£… å‚è€ƒ</li>
        <li><a href="windows.html" target="_blank">Windows</a> å®‰è£… å‚è€ƒ</li>
        </ul>
        <h3>paozhuæ¡†æ¶æŠ€æœ¯æ¶æ„åŸç†</h3>
        <p>paozhuæ¡†æ¶ä½¿ç”¨äº†ASIOçš„çº¿ç¨‹æ± ï¼Œæ˜¯ä¸“é—¨ç”¨æ¥åšIOä½¿ç”¨ï¼Œæ¯”å¦‚ç½‘ç»œæ”¶å‘ï¼Œæ¡†æ¶ä¹Ÿå†…ç½®æœ‰ä¸€ä¸ªä¸šåŠ¡çº¿ç¨‹æ± ï¼Œä¸“é—¨ç”¨æ¥è¿è¡Œä¸šåŠ¡ä»£ç çš„ã€‚</p>
        <p>ç›®å‰æ¡†æ¶ä¸»è¦HTTPå’ŒHTTPSï¼Œä¸¤ä¸ªçº¿ç¨‹ä¸æ–­å€¾å¬è¿æ¥åˆ°æ¥ï¼Œå½“ç”¨æˆ·ä½¿ç”¨æµè§ˆå™¨æˆ–Clientè®¿é—®æ—¶å€™äº§ç”Ÿä¸€ä¸ªè¿æ¥ï¼Œæ¡æ‰‹åï¼ŒæœåŠ¡å™¨ç­‰å¾…å®¢æˆ·ç«¯å‘å‡ºHTTPå¤´éƒ¨ä¿¡æ¯ï¼Œç„¶åæœåŠ¡å™¨å¤„ç†å™¨HTTPåè®®ï¼Œå¦‚æœURLåŒ¹é…æ˜¯æ³¨å†Œå‡½æ•°ï¼Œçœ‹å‡½æ•°æ˜¯åç¨‹è¿˜æ˜¯æ™®é€šå‡½æ•°ï¼Œåç¨‹ç›´æ¥è¿è¡Œï¼Œå¦‚æœæ˜¯æ™®é€šå‡½æ•°ç›´æ¥ä¸¢åˆ°ä¸šåŠ¡çº¿ç¨‹æ± ï¼Œå¦‚æœURLæ˜¯é™æ€æ–‡ä»¶ï¼Œé‚£ä¹ˆç›´æ¥å‘é€ï¼Œä¸èµ°ä¸šåŠ¡çº¿ç¨‹ã€‚</p>
        <p>å› ä¸ºC++åç¨‹æœ‰ä¼ æŸ“æ€§ï¼Œæ‰€ä»¥ä½ åœ¨åç¨‹æ³¨å†Œå‡½æ•°é‡Œé¢è¿è¡Œä¸šåŠ¡ä»£ç æ—¶å€™ï¼Œéœ€è¦ä½¿ç”¨ORMåç¨‹æ–¹æ³•ï¼Œå¦‚æœä½ åœ¨æ™®é€šå‡½æ•°é‡Œé¢æ— æ³•å‘èµ·åç¨‹å‡½æ•°åªèƒ½ç”¨ORMæ™®é€šå‡½æ•°ã€‚
        ä¸€èˆ¬å»ºè®®ä½¿ç”¨ä¸€ä¸ªè¿æ¥ä¸€ä¸ªçº¿ç¨‹ï¼Œä¸šåŠ¡çº¿ç¨‹ä¹Ÿæ˜¯æœ‰é˜Ÿåˆ—çš„ï¼Œæ‰€ä»¥ä¸šåŠ¡ä»£ç ä¸è¦éšä¾¿ä½¿ç”¨sleepå‡½æ•°ç¡çœ ã€‚</p>
    </div>
    <div class="container">
        <h3>paozhué…ç½®</h3>
        <p>paozhué…ç½®æ–‡ä»¶åœ¨<code>conf/server.conf</code></p>
        <p>å¯ä»¥å…ˆäº†è§£å‡ ä¸ªå˜é‡è®©é¡¹ç›®è¿è¡Œèµ·æ¥ã€‚</p>
        <pre><code>[default]
        threadmax=1024
        threadmin=5
        httpport=80
        httpsport=443
        cothreadnum=8 ;Coroutines run on thread num
        
        http2_enable=1
        debug_enable=1
        deamon_enable=0
        mainhost=www.869869.com
        certificate_chain_file=www.869869.com.pem
        private_key_file=www.869869.com.key
        tmp_dh_file=dh4096.pem
        reboot_password=e10adc3949ba59abbe56e057f20f883e ;md5(md5(&quot;123456&quot;)+&quot;rand_char&quot;+md5(&quot;123456&quot;))
        reboot_cron =d180h5 ;MDSW+Hhours reboot process M month D day S season (1 4 7 10) W week  
        clean_cron  =m5t600 ;5-minute interval clean 600 seconds ago inactive connection
        links_restart_process =n9998877ts1te5 ;More than 15000 connections, restart the process from 1:00 am to 5:00 am
        session_type=1 ;session save type 0.file 1.memory 2.redis 3.memcache 4.reserve
        static_file_compress_cache=1 ;1 enable, Cache static file compress(gzip,br) content to cache directory 
        modelspath=/Users/hzq/paozhu/models
        serverpath=/Users/hzq/paozhu
        viewpath=/Users/hzq/paozhu/view
        viewsopath=/Users/hzq/paozhu/module/view
        
        controlpath=/Users/hzq/paozhu/controller
        controlsopath=/Users/hzq/paozhu/module/controller
        
        temppath=/Users/hzq/paozhu/temp
        logpath=/Users/hzq/paozhu/log
        wwwpath=/Users/hzq/paozhu/www/default
        pluginspath=/Users/hzq/paozhu/plugins
        libspath=/Users/hzq/paozhu/libs
        directorylist=1
        index=index.html
        ;usehtmlcache=1
        ;usehtmlcachetime=3600
        staticfile_cache_num=0 ;0 not cache, min 10 begin  
        rewrite_404=0   ;1 file 2 action url path
        rewrite_404_action=index.html
        method_pre=
        method_after=
        show_visitinfo=0
        upload_max_size=16777216
        siteid=1
        groupid=0
        alias_domain=
        init_func=
        [www.869869.com]
        wwwpath=/Users/hzq/paozhu/www/default
        http2_enable=1
        ;rewrite_404=1
        ;rewrite_404_action=index.html|psy/index.html|exam/index.html
        ;controlsopath=/Users/hzq/paozhu/docs/controller
        static_pre=downloadfileauth|upload
        method_pre= ;api/dev/hostcors
        method_after=
        isuse_php=0
        rewrite_php=/Users/hzq/www/mpdftest|index.php
        fastcgi_host=127.0.0.1 ;/run/php/php8.1-fpm.sock
        fastcgi_port=9000
        upload_max_size=16777216
        siteid=1
        groupid=0
        alias_domain=
        init_func=
        </code></pre>
        <pre><code>threadmax=1024  æœ€å¤§ä¸šåŠ¡çº¿ç¨‹æ•°
        threadmin=5		æœ€å°ä¸šåŠ¡çº¿ç¨‹æ•°
        httpport=80	    æœåŠ¡å™¨å€¾å¬ç«¯å£ 
        httpsport=443   sslæœåŠ¡å™¨å€¾å¬ç«¯å£ 
        cothreadnum=8 ;Coroutines run on thread num IOåç¨‹ä½¿ç”¨çº¿ç¨‹æ± æ•°é‡
        </code></pre>
        <p><code>http2_enable=1</code> æ˜¯å¦å¯ç”¨http2ï¼Œå¯ä»¥æ¯ä¸ªåŸŸåæœ‰è‡ªå·±çš„è®¾ç½®</p>
        <p>sslè¯ä¹¦æ–‡ä»¶ï¼Œç”³è¯·æˆåŠŸåæ”¾åœ¨confç›®å½•ï¼Œç”Ÿäº§ç¯å¢ƒéœ€è¦åœ¨<code>/var/local/etc/paozhu</code>æ”¾ä¸€ä»½</p>
        <pre><code>mainhost=www.869869.com
        certificate_chain_file=www.869869.com.pem
        private_key_file=www.869869.com.key
        </code></pre>
        <p><code>reboot_cron</code> è‡ªåŠ¨é‡å¯è¿›ç¨‹å‘¨æœŸå¤©D å‘¨W æœˆM å­£èŠ‚S  hæ—¶é—´å°æ—¶ 180å¤©å‡Œæ™¨5ç‚¹é‡å¯è¿›ç¨‹
        <code>links_restart_process</code> å¦‚æœè¾¾åˆ°è¿æ¥æ•°ä¹Ÿå¯ä»¥é‡å¯nåé¢è¿æ¥æ•°ï¼Œ
        ts å¼€å§‹æ—¶æ®µ teç»“æŸæ—¶æ®µï¼Œå¦‚æœè¿™æ®µæ—¶é—´ç©ºé—²å°±ä¼šé‡å¯ã€‚</p>
        <pre><code>reboot_cron =d180h5 ;MDSW+Hhours reboot process M month D day S season (1 4 7 10) W week  
        clean_cron  =m5t600 ;5-minute interval clean 600 seconds ago inactive connection
        links_restart_process =n9998877ts1te5 ;More than 15000 connections, restart the process from 1:00 am to 5:00 am
        </code></pre>
        <p><code>directorylist=1</code> æ˜¾ç¤ºç›®å½•ï¼Œå¦‚æœè¯·æ±‚é™æ€æ–‡ä»¶æ˜¯ç›®å½•åï¼Œç›®å½•ä¸‹ä¹Ÿæ²¡æœ‰index.htmlæ–‡ä»¶ä¼šæ˜¾ç¤ºç›®å½•åˆ—è¡¨ã€‚
        ç”Ÿäº§ç¯å¢ƒå»ºè®®è®¾ç½®ä¸º0.</p>
        <p><code>wwwpath=/Users/hzq/paozhu/www/default</code> <code>/Users/hzq/paozhu</code>å»ºè®®æ¢æˆä½ çš„å½“å‰ç›®å½•åç§°,
        é¡¹ç›®ä¸‹<code>www/default</code>ï¼Œæ˜¯é™æ€æ–‡ä»¶ç›®å½•ï¼Œå¦‚æœæ˜¯å¤šåŸŸåå»ºè®®åˆ›å»º<code>www/domain.com</code>è¿™ä¸ªè®¾ç½®æ˜¯ä¸ºSAASæœåŠ¡çš„ã€‚</p>
        <p><code>upload_max_size=16777216</code> ä¸Šä¼ æ–‡ä»¶å¤§å°ï¼Œé»˜è®¤æ˜¯16M</p>
        <p>ä¸‹é¢å‡ ä¸ªæ˜¯SAASè®¾ç½®å¯ä»¥å…ˆä¸ç®¡</p>
        <pre><code>siteid=1
        groupid=0
        alias_domain=
        init_func=
        </code></pre>
        <p>åˆå­¦è€…åªè¦å…³æ³¨ <code>httpport</code> <code>httpsport</code> <code>wwwpath</code> <code>logpath</code>è®¾ç½®æ˜¯å¦æ­£ç¡®,
            æŠŠæ‰€æœ‰<code>/Users/hzq/paozhu</code>æ¢æˆä½ çš„ç›®å½•ã€‚</p>
    </div>
    <div class="container">
        <h3>paozhuå…¥é—¨</h3>
        <h4>Hello, World ä¾‹å­</h4>
        <pre><code class="language-C++">
        #include "techempower.h"    
        //@urlpath(null,plaintext)
        asio::awaitable&lt;std::string&gt; techempowerplaintext(std::shared_ptr&lt;httppeer&gt; peer)
        {
            peer-&gt;type(&quot;text/plain; charset=UTF-8&quot;);
            peer-&gt;set_header(&quot;Date&quot;, get_gmttime());
            peer-&gt;output = &quot;Hello, World!&quot;;
            co_return &quot;&quot;;
        }
        
        </code></pre>
    </div>
    <div class="container">
        <h3>æ³¨è§£åŸç†</h3>
        <p>æ‰€æœ‰æ³¨è§£å‡½æ•°å¿…é¡»æ”¾åœ¨ <code>controller/src</code> ç›®å½•ä¸‹</p>
        <p><code>techempower.cpp</code>æ–‡ä»¶å¿…é¡»åŒ…å«è‡ªèº«æ–‡ä»¶åçš„å¤´æ–‡ä»¶ <code>#include "techempower.h"</code> ï¼Œ<code>techempower.h</code>è¿™ä¸ªæ–‡ä»¶ä¼šè‡ªåŠ¨ç”Ÿæˆã€‚</p>
        <p>ç¼–è¯‘æ—¶å€™ä½¿ç”¨CMake Hookï¼Œå…ˆç¼–è¯‘ä¸€ä¸ªå¯ä»¥ä½¿ç”¨çš„æ³¨è§£å¤„ç†ç¨‹åºï¼Œç„¶åæ‰§è¡Œè¿™ä¸ªç¨‹åºå¤„ç†  <code>controller/src</code>
        ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶ï¼Œæå–<code>//@urlpath(null,plaintext)</code>æ ¼å¼çš„å‡½æ•°ï¼Œç„¶ååˆ›å»ºç›¸åº”çš„å¤´æ–‡ä»¶ï¼Œç„¶åç”Ÿæˆ
        æ³¨è§£å‡½æ•°ï¼Œä¿å­˜æ˜ å°„å‡½æ•°åˆ° <code>common/autocontrolmethod.hpp</code> æ–‡ä»¶ã€‚</p>
        <p>æ˜¯ä¸æ˜¯å¾ˆæœ‰Java Spring Bootå‘³é“ï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥æ¯•ç«Ÿä¼˜é›…å†™URLå’Œå‡½æ•°æ˜ å°„å…³ç³»ã€‚</p>
    </div>
    <div class="container">     
        <h3>æ³¨è§£ä»‹ç»</h3>
        <p><code>//@urlpath(null,plaintext)</code> ä¸ºæ³¨è§£å‡½æ•°ï¼Œä¸urlæ˜ å°„ï¼Œæ¯”å¦‚ http://localhost/plaintext ä¼šè®¿é—®åˆ°<code>plaintext</code> çš„æ³¨è§£å‡½æ•°ã€‚</p>
        <p>nullè¡¨ç¤ºè®¿é—®plaintextä¹‹å‰å¿…é¡»å…ˆæ‰§è¡Œçš„æ³¨è§£å‡½æ•°ï¼Œä¾‹å¦‚ï¼šå¸¦æƒé™çš„åå°ï¼Œéœ€è¦éªŒè¯æ˜¯å¦ç™»å½•</p>
        <p><code>//@urlpath(islogin,plaintext)</code> è¿™æ ·å¿…é¡»å…ˆæ‰§è¡Œ<code>islogin</code>çš„æ³¨è§£ï¼Œè¿”å›<code>OK</code>è¡¨ç¤ºæˆåŠŸã€‚</p>
        <pre><code class="language-C++">//@urlpath(null, islogin)
        asio::awaitable&lt;std::string&gt; checklogin(std::shared_ptr&lt;httppeer&gt; peer)
        {
            httppeer &amp;client = peer-&gt;get_peer();
        
            if(peer-&gt;session[&quot;userid&quot;].to_int()&gt;0)
            {
                 co_return &quot;ok&quot;;
            } 
        
            client &lt;&lt; &quot;You must login&quot;;
        
            co_return &quot;&quot;;
        }
        </code></pre>
        <p><code>asio::awaitable&lt;std::string&gt;</code> åç¨‹æ³¨è§£å‡½æ•°è¡¨ç¤ºé‡Œé¢ä»£ç ä¸èµ°ä¸šåŠ¡çº¿ç¨‹ï¼Œ
        å¦‚æœç¹é‡è®¡ç®—æœ€å¥½ä½¿ç”¨æ™®é€šå‡½æ•°ï¼Œè¿™æ ·èµ°ä¸šåŠ¡çº¿ç¨‹å¤„ç†ï¼Œä¸ä¼šå¡IOçº¿ç¨‹ã€‚</p>
        <p><code>peer-&gt;session[&quot;userid&quot;]</code> è¡¨ç¤ºå–å¾—<code>session</code>å†…å®¹ï¼Œå¯ä»¥åœ¨ç™»å½•æˆåŠŸåä¿å­˜è¿›å»ã€‚</p>
        <p><code>client &lt;&lt; &quot;You must login&quot;;</code> æ˜¯é‡è½½äº†<code>&lt;&lt;</code>è¿ç®—ç¬¦,çœŸå®å†…å®¹æ˜¯ä¿å­˜åœ¨<code>peer-&gt;output</code>ã€‚</p>
        <p><code>co_return &quot;&quot;;</code> æ˜¯åç¨‹è¿”å›ç»“æœï¼Œè¯·æ³¨æ„å’Œæ™®é€šå‡½æ•°åŒºåˆ«ï¼Œä¸çŸ¥é“æœ€å¥½è¿”å›ç©ºå­—ç¬¦ä¸²ã€‚</p>
        <p>ä¸‹é¢æ˜¯æ™®é€šæ³¨å†Œå‡½æ•°,æ³¨æ„è¿”å›å€¼ï¼Œè¡¨ç¤ºèµ°ä¸šåŠ¡çº¿ç¨‹æ± ï¼Œå°±æ˜¯ä¸€ä¸ªè¿æ¥åˆ†é…ä¸€ä¸ªçº¿ç¨‹ï¼Œç»å…¸åº”ç”¨ã€‚</p>
        <p>å»ºè®®æœ‰è´Ÿè½½è®¡ç®—æœ€å¥½ä½¿ç”¨è¿™ç§æ™®é€šå‡½æ•°ï¼Œä¸ç„¶å¤§é‡è®¡ç®—å¯èƒ½å½±å“å¹¶å‘é‡ï¼Œæ˜¯æœ‰å¯èƒ½ï¼Œå¦‚æœåªæ˜¯CRUDä¸šåŠ¡
        ç”¨é‚£ç§æ–¹å¼åº”è¯¥é—®é¢˜ä¸å¤§ï¼Œç”¨åç¨‹å°±ä¸è¦ä½¿ç”¨ <code>std::this_thread::sleep_for(std::chrono::microseconds(1000));</code>
        è¿™ç§ä»£ç ã€‚</p>
        <pre><code class="language-C++">//@urlpath(null,hello)
        std::string testhello(std::shared_ptr&lt;httppeer&gt; peer)
        {
            httppeer &amp;client = peer-&gt;get_peer();
            client &lt;&lt; &quot; Hello world! ğŸ§¨ Paozhu c++ web framework &quot;;
        
            return &quot;&quot;;
        }
        
        </code></pre>
        <p>æ›´å¤šä»£ç ä½¿ç”¨æ¡ˆä¾‹è¯·å‚è€ƒ <code>controller/src</code> ç›®å½•ä¸‹çš„ä¾‹å­</p>
    </div>
    <div class="container">
        <h3>å†…ç½®å¾®å‹å¯¹è±¡ä»‹ç»</h3>
        <pre><code class="language-C++">http::obj_val hval;
        hval[&quot;aaa&quot;]=3344;
        hval[&quot;bbb&quot;]=&quot;1234567890&quot;;
        
        std::cout&lt;&lt;&quot;ll:&quot;&lt;&lt;hval[&quot;aaa&quot;].to_int()&lt;&lt;std::endl;
        std::cout&lt;&lt;&quot;vv:|&quot;&lt;&lt;static_cast&lt;int&gt;(hval[&quot;bbb&quot;].get_type())&lt;&lt;&quot;|&quot;&lt;&lt;std::endl;
        if(hval[&quot;bbb&quot;].is_string())
        {
            std::cout&lt;&lt;&quot;str:&quot;&lt;&lt;hval[&quot;bbb&quot;].to_string()&lt;&lt;std::endl;
            std::cout&lt;&lt;&quot;str:&quot;&lt;&lt;hval[&quot;bbb&quot;].str_view()&lt;&lt;std::endl;
            std::cout&lt;&lt;&quot;str:&quot;&lt;&lt;hval[&quot;bbb&quot;].str_view(2,5)&lt;&lt;std::endl;
        }
        
        http::obj_val nval;
        nval.from_json(&quot;{\&quot;bba\&quot;:[[[111,222],[333,444],[555,666]],[[777,888],[999,1111],[2222,3333]],[[4444,5555],[6666,7777],[8888,9999]]]}&quot;);
        
        std::cout&lt;&lt;&quot;json out:&quot;&lt;&lt;nval.to_json()&lt;&lt;std::endl;
        
        std::string bbb=nval.to_json();
        http::obj_val pval;
        pval.from_json(bbb);
        </code></pre>
        <p><code>http::obj_val</code> æ˜¯æ¡†æ¶å†…ç½®ä¸€ä¸ªå¾®å‹å¯¹è±¡ï¼Œå¯ä»¥å¯¼å…¥<code>from_json</code>å’Œå¯¼å‡º<code>to_json</code> <code>JSON</code>å¯¹è±¡è½¬æ¢ã€‚</p>
        <p>æ˜¯ä¸æ˜¯æœ‰è„šæœ¬è¯­è¨€å‘³é“ï¼Œå¯ä»¥ä¿å­˜æ•°å€¼å’Œå­—ç¬¦ä¸²ï¼Œè€Œä¸”å¯ä»¥ä¿å­˜æ ‘å½¢ç»“æ„ã€‚</p>
        <p>ä¸€ä¸ª<code>http::obj_val</code>æ˜¯16ä¸ªå­—èŠ‚å¤§å°ï¼Œå¦‚æœæ˜¯<code>KV</code>å¯¹è±¡è¦64å¤§å°ã€‚</p>
        <p><code>hval[&quot;aaa&quot;]</code> å°±æ˜¯<code>KV</code>å¯¹è±¡ã€‚</p>
        <p><code>http::obj_val</code> å¯¹è±¡å†…ç½®æ–¹æ³•</p>
        <ul>
        <li><code>set_array()</code> è®¾ç½®ä¸ºæ•°ç»„ å¯ä»¥ä½¿ç”¨push(v)</li>
        <li><code>set_obj()</code> è®¾ç½®ä¸ºå¯¹è±¡KV å¯ä»¥ä½¿ç”¨push(k,v)æˆ–obj[key]=valueæ–¹å¼</li>
        <li><code>set_object()</code> è®¾ç½®ä¸ºå¯¹è±¡KV å¯ä»¥ä½¿ç”¨push(k,v)æˆ–obj[key]=valueæ–¹å¼</li>
        </ul>
        <h4>åˆ¤æ–­å¯¹è±¡å±æ€§</h4>
        <ul>
        <li><code>is_array()</code> æ˜¯å¦æ˜¯æ•°ç»„</li>
        <li><code>is_obj()</code>	æ˜¯å¦æ˜¯å¯¹è±¡</li>
        <li><code>is_object()</code> æ˜¯å¦æ˜¯å¯¹è±¡</li>
        <li><code>is_string()</code> æ˜¯å¦æ˜¯å­—ç¬¦ä¸²</li>
        <li><code>is_number()</code> æ˜¯å¦æ•°å­—</li>
        </ul>
        <h4>å…¸å‹ä½¿ç”¨æ–¹å¼å’ŒHTMLæ¨¡æ¿ä½¿ç”¨</h4>
        <pre><code class="language-C++">        client.val[&quot;list&quot;].set_array();
                obj_val temp;
        
                for (unsigned int i = 0; i &lt; topicm.record.size(); i++)
                {
                    temp[&quot;id&quot;]       = topicm.record[i].topicid;
                    temp[&quot;parentid&quot;] = topicm.record[i].parentid;
                    temp[&quot;value&quot;]    = topicm.record[i].title;
                    client.val[&quot;list&quot;].push(temp);
                }
        </code></pre>
    </div>
    <div class="container">
        <h4>åœ¨HTMLæ¨¡æ¿ä¸­ä½¿ç”¨</h4>
        <pre><code class="language-HTML">&lt;%c for(auto &amp;a:obj[&quot;infos&quot;].as_array()){ %&gt;
        &lt;tr&gt;
          &lt;td&gt;&lt;%c echo&lt;&lt;a[&quot;userid&quot;].to_string(); %&gt;&lt;/td&gt;
          &lt;td&gt;&lt;%c echo&lt;&lt;a[&quot;nickname&quot;].to_string(); %&gt;&lt;/td&gt;
          &lt;td&gt;&lt;%c echo&lt;&lt;a[&quot;name&quot;].to_string(); %&gt;&lt;/td&gt;
          &lt;td&gt;&lt;%c if(a[&quot;isopen&quot;].to_int()==1){ %&gt;å¯ç”¨&lt;%c }else{ %&gt;å…³é—­&lt;%c } %&gt;&lt;/td&gt;
          &lt;td&gt;&lt;a href=&quot;/superadmin/edituser?userid=&lt;%c echo&lt;&lt;a[&quot;userid&quot;].to_string(); %&gt;&quot;&gt;ç¼–è¾‘&lt;/a&gt; | &lt;a href=&quot;/superadmin/deleteuser?userid=&lt;%c echo&lt;&lt;a[&quot;userid&quot;].to_string(); %&gt;&quot; onclick=&quot;return confirm('ç¡®å®šåˆ é™¤ï¼Ÿ');&quot;&gt;åˆ é™¤&lt;/a&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;%c } %&gt;
        </code></pre>
        <h4>å†…ç½®å¾®å‹å¯¹è±¡é«˜çº§æ–¹æ³•</h4>
        <ul>
        <li><code>obj_val multi_sort(std::string_view key,unsigned char order);</code> äºŒç»´æ•°ç»„æŒ‰é”®åæ’åº order å¯ä»¥æ˜¯ SORT_ASC,SORT_DESC</li>
        <li><code>obj_val multi_sort(std::string_view key,unsigned char order,std::string_view key2,unsigned char order2);</code>	äºŒç»´æ•°ç»„æŒ‰é”®åæ’åº order å¯ä»¥æ˜¯ SORT_ASC,SORT_DESCï¼Œå¦‚æœæœ‰ç›¸åŒäºŒæ¬¡æ’åº,éœ€è¦key2 å’Œ order2</li>
        </ul>
        <h4>å†…ç½®å¾®å‹å¯¹è±¡é«˜çº§ç”¨æ³•</h4>
        <pre><code class="language-c++">    http::obj_val zval4;
            zval4.set_array();
            float s[6]={83.3,77.75,60.45,83.3,77.75,45.6};
            for(unsigned int jjj=0;jjj&lt;6;jjj++)
            {
                http::obj_val z4;
                z4.set_object();
                z4[&quot;name&quot;]=&quot;sss&quot;+std::to_string(jjj);
                z4[&quot;score&quot;]=s[jjj];
                z4[&quot;id&quot;]=jjj+10;
                zval4.push(z4);
            }
            http::obj_val zval5=zval4.multi_sort(&quot;score&quot;,SORT_ASC);

            std::cout&lt;&lt;&quot;------&quot;&lt;&lt;std::endl;
            if(zval5.is_array())
            {
                std::cout&lt;&lt;&quot;multi_sort score result: &quot;&lt;&lt;zval5.size()&lt;&lt;std::endl;
                for(auto &amp;a:zval5.as_array())
                {
                    if(a.is_object())
                    {
                        for(auto &amp;[aa,bb]:a.as_object())
                        {
                            std::cout&lt;&lt;&quot;zval5[&quot;&lt;&lt;aa&lt;&lt;&quot;]=&quot;&lt;&lt; bb.to_string()&lt;&lt;std::endl;
                        }
                    }
                    std::cout&lt;&lt;std::endl;
                }
            }

            http::obj_val zval6=zval4.multi_sort(&quot;score&quot;,SORT_ASC,&quot;id&quot;,SORT_DESC);
            std::cout&lt;&lt;&quot;------&quot;&lt;&lt;std::endl;
            if(zval6.is_array())
            {
                std::cout&lt;&lt;&quot;multi_sort score id result: &quot;&lt;&lt;zval6.size()&lt;&lt;std::endl;
                for(auto &amp;a:zval6.as_array())
                {
                    if(a.is_object())
                    {
                        for(auto &amp;[aa,bb]:a.as_object())
                        {
                            std::cout&lt;&lt;&quot;zval6[&quot;&lt;&lt;aa&lt;&lt;&quot;]=&quot;&lt;&lt; bb.to_string()&lt;&lt;std::endl;
                        }
                    }
                    std::cout&lt;&lt;std::endl;
                }
            }
            std::cout&lt;&lt;&quot;------&quot;&lt;&lt;std::endl;
        </code></pre>
        <p>ä¸»è¦åº”ç”¨åœ¨å¤æ‚å¯¹è±¡äº¤æ¢ç¨‹åºï¼Œå¦‚æœä¸æ˜¯å¯ä»¥ä½¿ç”¨C++ å†…ç½®å¯¹è±¡æˆ–STLåº“æ–¹å¼ã€‚</p>
    </div>
    <div class="container">
        
        <h3>ORMä»‹ç»</h3>
        <p>å…ˆåœ¨æŒ‰ç…§å®‰è£…ç¯å¢ƒæ•™ç¨‹å¯¼å…¥çš„æ•°æ®ã€‚</p>
        <p>paozhuæ¡†æ¶å†…ç½®ORMå¯¹è±¡ï¼Œç›®å‰è‡ªå·±åˆ†æMySQLåè®®ï¼Œæ–¹ä¾¿å’ŒORMæ•´åˆï¼Œè€Œä¸”æ”¯æŒåç¨‹æ¨¡å¼ï¼Œè¿™ä¸ªå®˜æ–¹æ²¡æœ‰æ”¯æŒã€‚</p>
        <p>é…ç½®æ–‡ä»¶ä½ç½® <code>conf/orm.conf</code></p>
        <pre><code>[default]
        type=main
        host=127.0.0.1
        port=3306
        dbname=hello_world
        user=benchmarkdbuser
        password=benchmarkdbpass
        pretable=
        maxpool=5
        dbtype=mysql
        #ssl=ON
        
        type=second
        host=127.0.0.1
        port=3306
        dbname=hello_world
        user=benchmarkdbuser
        password=benchmarkdbpass
        pretable=
        maxpool=20
        dbtype=mysql
        #ssl=ON
        </code></pre>
    </div>
    <div class="container">
        <h3>ORM é…ç½®</h3>
        <p><code>type</code> ä¸ºç±»å‹ å°±æ˜¯ä¸»ä»åˆ†ç¦»ï¼Œä»¥åå¯ä»¥å¼€å‘ç¼“å­˜åŒæ­¥ï¼Œç›®å‰å…ˆä¸»ä»ã€‚host <code>127.0.0.1</code> å¡«æœ¬åœ°çš„åœ°å€ï¼ŒMySQLå¿…é¡»å¤§äºç­‰äº8ç‰ˆæœ¬ï¼Œå› ä¸ºMySQL9ä¸æ”¯æŒæ—§çš„è®¤è¯äº†ï¼Œ
        <code>pretable</code> æ˜¯è¡¨å‰ç¼€ï¼Œæœ‰æ—¶å€™åªæœ‰ä¸€ä¸ªæ•°æ®åº“æƒé™å¯ä»¥ä¸€ä¸ªæ•°æ®åº“æ”¾å¤šä¸ªä¸šåŠ¡ã€‚
        <code>dbtype</code> ç›®å‰æ”¯æŒMySQLã€‚
        <code>ssl</code> å¯ä»¥æ‰“å¼€ï¼Œç‰¹åˆ«æ˜¯è¿œç¨‹è¿æ¥æ—¶å€™ï¼Œå¯ç”¨åŠ å¯†è¿æ¥ã€‚æœ¬åœ°çš„ä¸ä¼šå¯ç”¨sslè¿æ¥ã€‚</p>
    </div>
    <div class="container">
        <h3>ORM ä½¿ç”¨å…¥é—¨</h3>
        <p>æ¡†æ¶ç›®å‰æ”¯æŒæ•°æ®åº“åˆ°æ–‡ä»¶æ–¹å¼ï¼Œè¿™æ ·ä¿®æ”¹æ•°æ®åº“å¯ä»¥é‡æ–°ç”ŸæˆORMæ–‡ä»¶ã€‚
        ç¼–è¯‘æˆåŠŸå</p>
        <pre><code># ./bin/paozhu_cli 
        
        paozhu_cli(1495,0x7ff85ac38fc0) malloc: nano zone abandoned due to inability to reserve vm space.
          model ï½œ view | viewtocpp | control   
         Welcome to use cli to manage your MVC filesã€‚
        (m)model (v)view (f)viewtocpp or (c)control , (j)son ,x or q to exit[input m|v|f|c|j|]:
        </code></pre>
        <p>è¾“å…¥ m é€‰æ‹©ç”ŸæˆORMæ¨¡å‹æ–‡ä»¶</p>
        <pre><code>
        paozhu_cli(1495,0x7ff85ac38fc0) malloc: nano zone abandoned due to inability to reserve vm space.
          model ï½œ view | viewtocpp | control   
         Welcome to use cli to manage your MVC filesã€‚
        (m)model (v)view (f)viewtocpp or (c)control , (j)son ,x or q to exit[input m|v|f|c|j|]:m   
         ğŸ„ current path: /Users/hzq/paozhu
         1 hello_world
         3 paozhu_docs
         5 cppcms
        select db index:
        </code></pre>
        <p>è¾“å…¥ 1 é€‰æ‹© hello_world æ•°æ®åº“ç”Ÿæˆæ–‡ä»¶ã€‚</p>
        <pre><code>paozhu_cli(1495,0x7ff85ac38fc0) malloc: nano zone abandoned due to inability to reserve vm space.
          model ï½œ view | viewtocpp | control   
         Welcome to use cli to manage your MVC filesã€‚
        (m)model (v)view (f)viewtocpp or (c)control , (j)son ,x or q to exit[input m|v|f|c|j|]:m
         ğŸ„ current path: /Users/hzq/paozhu
         1 hello_world
         3 paozhu_docs
         5 cppcms
        select db index:1
        show tables;
        create fortune table to models ğŸš—
         create table metainfo file: /Users/hzq/paozhu/orm/include/fortunebase.h
        create world table to models ğŸš—
         create table metainfo file: /Users/hzq/paozhu/orm/include/worldbase.h
        (m)model (v)view (f)viewtocpp or (c)control , (j)son ,x or q to exit[input m|v|f|c|j|]:x
        </code></pre>
        <p>è¾“å…¥ x é€€å‡º</p>
        <p>å¯ä»¥çœ‹åˆ° /Users/hzq/paozhu/orm ç›®å½•ä¸‹ç”Ÿæˆæ–‡ä»¶</p>
        <pre><code>
        orm
        â”œâ”€â”€ include
        â”‚   â”œâ”€â”€ fortune_mysql.h
        â”‚   â”œâ”€â”€ fortunebase.h
        â”‚   â”œâ”€â”€ world_mysql.h
        â”‚   â””â”€â”€ worldbase.h
        â”œâ”€â”€ orm.h
        â”‚
        models
        â”œâ”€â”€ Fortune.cpp
        â”œâ”€â”€ World.cpp
        â””â”€â”€ include
            â”œâ”€â”€ Fortune.h
            â””â”€â”€ World.h
        </code></pre>
        <p>ormç›®å½•æ˜¯å®ä½“æ–‡ä»¶ï¼Œä¸¤ä¸ªæ–‡ä»¶ä¸€ä¸ªæ˜¯mysqlè¿æ¥å±‚mysqlç»“å°¾,æ“ä½œæ•°æ®åº“æŸ¥è¯¢æ¥å£ï¼Œä¸€ä¸ªæ˜¯æ•°æ®è¡¨å®ä½“æ˜ å°„base.hç»“å°¾ï¼Œä¹Ÿæ˜¯æ“ä½œæŸ¥è¯¢ç»“æœçš„æ¥å£,è¿™ä¸ªç›®å½•æ–‡ä»¶æ›´æ–°æ—¶å€™ä¼šè¦†ç›–ï¼Œå› ä¸ºä¸æ•°æ®åº“è¡¨ç»“æ„ä¸€ä¸€å¯¹åº”ã€‚</p>
        <p>modelsç›®å½•æ˜¯ä¸šåŠ¡ä»£ç æ–‡ä»¶ï¼Œæˆ‘ä»¬å…¶å®æ˜¯æ“ä½œmodelsç›®å½•ä¸‹æ–‡ä»¶ï¼Œè¿™ä¸¤ä¸ªæ–‡ä»¶ä¸€ä¸ªcppä¸€ä¸ªhæ–‡ä»¶ï¼Œè‡ªåŠ¨ç”Ÿæˆï¼Œ ä½†æ˜¯åªç”Ÿæˆä¸€æ¬¡ï¼Œæœ‰äº†ä¸ä¼šè¦†ç›–ï¼Œåœ¨è‡ªå·±çš„é¡¹ç›®ç³»ç»Ÿå¯ä»¥åŠ ä¸šåŠ¡ä»£ç åœ¨é‡Œé¢ã€‚</p>
        <p>æ¯”å¦‚
        auto myworld = orm::World();
        å°±æ˜¯ models ç›®å½•ä¸‹ World.h
        è¿™ä¸ªæ˜¯é»˜è®¤æ•°æ®åº“ï¼Œæ¯”å¦‚è‡ªå¸¦cmsæ¼”ç¤º
        auto users = orm::cms::Sysuser();</p>
        <p>ormæ˜¯å‘½åç©ºé—´ï¼Œä¸»è¦æ˜¯ç»™ORMç”¨
        cmsæ˜¯orm.confæ•°æ®åº“é…ç½®æ ‡ç­¾ï¼Œä¹Ÿæ˜¯ç”Ÿæˆçš„cmså‘½åç©ºé—´ï¼Œæ–¹ä¾¿éš”ç¦»å’Œè½¬æ¢æ•°æ®åº“ï¼Œå¦‚æœæ˜¯[default]å¯ä»¥çœç•¥default.</p>
        <h3>ORMè®¾è®¡åŸç†</h3>
        <p>ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡å‘¢ï¼Œå…¶å®ä¹Ÿæ˜¯paozhuæ¡†æ¶ç›®å‰æ¯”å…¶å®ƒæ¡†æ¶éå¸¸æœ‰ç‰¹è‰²çš„è®¾è®¡ã€‚</p>
        <ol>
        <li>ä¸€ä¸ªæ•°æ®åº“å¯ä»¥æœ‰å¤šä¸ªè¿æ¥ï¼Œè¿™æ ·æˆ‘ä»¬ä¸ç”¨çŸ¥é“ä½¿ç”¨é‚£ä¸ªè¿æ¥ã€‚</li>
        <li>æ•°æ®åº“åå­—å¯èƒ½å¾ˆé•¿ï¼Œåƒäº‘ä¸»æœºå¯èƒ½è‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªå‡ åä¸ªå­—ç¬¦é•¿çš„æ•°æ®åº“åï¼Œç”šè‡³æœ‰ä¸‹åˆ’çº¿çš„ã€‚</li>
        <li>å¯ä»¥ä¸ªæ€§æ ‡ç­¾ï¼Œè¿™æ ·æ•°æ®åº“æ˜¯ä»€ä¹ˆåä¸é‡è¦äº†ã€‚</li>
        <li>æˆ‘ä»¬ç”¨æ¥åšå‘½åç©ºé—´éš”ç¦»è¡¨å¯¹è±¡ï¼Œè¿™æ ·å¾ˆå¤šæ•°æ®åº“ç”Ÿæˆçš„C++ç±»ä¸ä¼šå†²çªã€‚</li>
        <li>ORMè®¾è®¡å‡ºå¼ºå¤§ä¼˜é›…é“¾å¼å†™æ³•ï¼ŒGoå’ŒRustè®¾è®¡ç¼ºé™·æ— æ³•ä½¿ç”¨é“¾å¼å†™æ³•ã€‚</li>
        </ol>
        <p>æ‰€ä»¥<code>orm::cms::Sysuser();</code>ä½¿ç”¨cmséš”ç¦»äº†<code>sysuser</code>è¡¨å®ä½“C++ç±»ï¼Œä¸ä¼šä¸å…¶å®ƒæ•°æ®åº“åŒåè¡¨æœ‰å†²çªã€‚
        æ¯”å¦‚<code>orm::erp::Sysuser();</code> erpæ˜¯erpæ•°æ®åº“æ ‡ç­¾ï¼Œä»–çš„æ•°æ®åº“æ˜¯ä»€ä¹ˆåä¸é‡è¦ï¼Œ
        å°±æ˜¯åŒæ ·æœ‰<code>sysuser</code>è¡¨ä¹Ÿæ²¡æœ‰å…³ç³»ã€‚</p>
        <p>ä¹‹æ‰€ä»¥è¿™æ ·è®¾è®¡ï¼Œå°±æ˜¯ä¸€ä¸ªä¸šåŠ¡ç³»ç»Ÿï¼Œä¸€ä¸ªå•ä½“æœåŠ¡å™¨ç¨‹åºï¼Œå¯ä»¥æœ‰å¾ˆå¤šæ•°æ®åº“ï¼Œè€Œä¸”ä»–ä»¬è¡¨åå¯ä»¥æœ‰é‡åã€‚
        ä»¥åå¯ä»¥æœ‰ä¸åŒæ•°æ®åº“ï¼Œæ¯”å¦‚MySQL PGç­‰ï¼Œä»–ä»¬å¯ä»¥åˆ†å¸ƒåœ¨å…¶å®ƒæœºå™¨ä¸Šã€‚
        ä»–ä»¬å¯ä»¥æ··åˆé›†ç¾¤ï¼Œå•ä½“æœåŠ¡å™¨ç¨‹åºä¹Ÿå¯ä»¥é›†ç¾¤ï¼Œå› ä¸ºå†…ç½®äº†è¯»å†™åˆ†ç¦»ï¼Œå†™æœåŠ¡å™¨å¯ä»¥åŒä¸€ä¸ªï¼Œ
        æŸ¥è¯¢å¯ä»¥å›ºå®šæˆ–åŠ¨æ€åˆ†é…æ•°æ®åº“æœåŠ¡å™¨,æ¡†æ¶å¯ä»¥é€‚åˆå¤§ä¸šåŠ¡ç³»ç»Ÿã€‚
        ç›®å‰çœ‹ä¸€ä¸ªæœåŠ¡å™¨é›†æˆæ•°æ®åº“å’Œä¸šåŠ¡ç¨‹åºä¸ºä¸»ã€‚</p>
    </div>
    <div class="container">
        <h3>ORMä½¿ç”¨ä¾‹å­</h3>
        <p>è¡¨æ¨¡å‹æœ‰ä¸¤ä¸ªæˆå‘˜å˜é‡å¾ˆé‡è¦</p>
        <ul>
        <li>data     æ˜¯å•ä¸ªè¡¨æ•°æ®ç»“æ„æ˜ å°„</li>
        <li>record   ä¸€ä¸ªstd::vectoræ•°ç»„</li>
        </ul>
        <p>è¡¨æ•°æ®ç»“æ„</p>
        <pre><code class="language-C++">struct meta{
         unsigned  int  id = 0; 
         int  randomnumber = 0;  
        } data;
        
        std::vector&lt;worldbase::meta&gt; record;
        </code></pre>
        <h4>åç¨‹æ–¹å¼ä½¿ç”¨ORM</h4>
        <pre><code class="language-C++">//@urlpath(null,queries)
        asio::awaitable&lt;std::string&gt; techempowerqueries(std::shared_ptr&lt;httppeer&gt; peer)
        {
            peer-&gt;type(&quot;application/json; charset=UTF-8&quot;);
            peer-&gt;set_header(&quot;Date&quot;, get_gmttime());
        
            unsigned int get_num = peer-&gt;get[&quot;queries&quot;].to_int();
            if (get_num == 0)
            {
                get_num = 1;
            }
            else if (get_num &gt; 500)
            {
                get_num = 500;
            }
            auto myworld = orm::World();
            myworld.record.reserve(get_num);
            myworld.lock_conn();
            for (unsigned int i = 0; i &lt; get_num; i++)
            {
                myworld.wheresql.clear();
                unsigned int rd_num = rand_range(1, 10000);
                myworld.where(&quot;id&quot;, rd_num);
                co_await myworld.async_fetch_append();
            }
            myworld.unlock_conn();
            peer-&gt;output = myworld.to_json();
            co_return &quot;&quot;;
        }
        </code></pre>
        <ul>
        <li><code>orm::World();</code> æ˜¯ORMçš„è¡¨æ¨¡å‹ï¼Œé»˜è®¤è¿æ¥ï¼Œæ‰€ä»¥ä¸ç”¨default</li>
        <li><code>myworld.lock_conn();</code> å°±æ˜¯å›ºå®šä¸€ä¸ªè¿æ¥ï¼Œå› ä¸ºä½¿ç”¨ORMè¿æ¥æ± æ–¹å¼,ä¼šè½®è®­ä½¿ç”¨è¿æ¥ã€‚</li>
        <li><code>myworld.record.reserve(get_num);</code> æ‰©å®¹è¿™ä¸ªç†Ÿæ‚‰STLçš„çŸ¥é“ã€‚</li>
        <li><code>myworld.wheresql.clear();</code> æ¨èä½¿<code>myworld.clearWhere();</code>æ–¹å¼æ¸…é™¤æ¡ä»¶ã€‚</li>
        <li><code>myworld.where(&quot;id&quot;, rd_num);</code> åŠ ä¸€ä¸ªæ¡ä»¶ã€‚</li>
        <li><code>co_await myworld.async_fetch_append();</code> æ˜¯é«˜çº§ç”¨æ³•ï¼Œä¼šé™„åŠ æ•°æ®åˆ°recordå¯¹è±¡ä¸Šã€‚ä¸€èˆ¬ä½¿ç”¨<code>co_await myworld.async_fetch();</code> ä¼šæ¸…é™¤recordå¯¹è±¡ï¼Œç„¶åé‡æ–°èµ‹å€¼ã€‚</li>
        </ul>
        <p><code>peer-&gt;output = myworld.to_json();</code> ç›´æ¥è¾“å‡ºJSONåˆ°æµè§ˆå™¨ã€‚</p>

    </div>
    <div class="container">
        <h4>åŒæ­¥ä½¿ç”¨ORM</h4>
        <p>æ­£å¸¸ä¸šåŠ¡ä»£ç åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­è¿è¡Œï¼Œå°±æ˜¯ä¸€ä¸ªè¿æ¥ä¸€ä¸ªçº¿ç¨‹ï¼Œè¿™ä¸ªå¾ˆç»å…¸æ–¹å¼ã€‚</p>
        <pre><code class="language-C++">//@urlpath(admin_islogin,admin/addtopic)
        std::string admin_addtopic(std::shared_ptr&lt;httppeer&gt; peer)
        {
            httppeer &amp;client = peer-&gt;get_peer();
            try
            {
                auto topicm = orm::cms::Topic();
                topicm.where(&quot;userid&quot;, client.session[&quot;userid&quot;].to_int()).asc(&quot;parentid&quot;).fetch();
        
                client.val[&quot;list&quot;].set_array();
                obj_val temp;
        
                for (unsigned int i = 0; i &lt; topicm.record.size(); i++)
                {
                    temp[&quot;id&quot;]       = topicm.record[i].topicid;
                    temp[&quot;parentid&quot;] = topicm.record[i].parentid;
                    temp[&quot;value&quot;]    = topicm.record[i].title;
                    client.val[&quot;list&quot;].push(temp);
                }
            }
            catch (std::exception &amp;e)
            {
                client.val[&quot;code&quot;] = 1;
            }
        
            peer-&gt;view(&quot;admin/addtopic&quot;);
            return &quot;&quot;;
        }
        </code></pre>


        <p><code>httppeer &amp;client = peer-&gt;get_peer();</code> å¼•ç”¨è¿æ¥å¯¹è±¡</p>
        <p><code>auto topicm = orm::cms::Topic();</code>  äº§ç”Ÿä¸€ä¸ªORMæ¨¡å‹ï¼Œè¿™ä¸ªæ¨¡å‹æºæ–‡ä»¶åœ¨modelsç›®å½•ä¸‹é¢,Topicå°±æ˜¯æ•°æ®åº“è¡¨åï¼Œå¦‚æœè®¾ç½®å‰ç¼€é‚£ä¹ˆæ¡†æ¶ä¼šè‡ªåŠ¨å»é™¤ï¼Œ<code>topicm.where</code> æ·»åŠ æŸ¥è¯¢æ¡ä»¶ï¼Œ<code>asc(&quot;parentid&quot;).fetch()</code> æŒ‰å‡åº<code>parentid</code>æŸ¥è¯¢ï¼Œ<code>.fetch()</code>å‘å‡ºæŸ¥è¯¢å‘½ä»¤ã€‚</p>
        <h4>åˆ†é¡µä½¿ç”¨</h4>
        <p>å¦‚æœä¸æƒ³è¦é‚£ä¹ˆå¤šæ•°æ®å¯ä»¥åˆ†é¡µå–å‡ºï¼Œç‰¹åˆ«æ˜¯ç½‘ç»œä¸šåŠ¡ï¼Œéœ€è¦å ç”¨å¸¦å®½æˆ–cpuèµ„æºï¼Œå¹³æ—¶æœ€å¥½æŒ‰éœ€ä½¿ç”¨<code>.select(&quot;fieldname1,fieldname2&quot;)</code> å–å‡ºå­—æ®µæ•°æ®ï¼Œä½¿ç”¨<code>.limit(pos,offset)</code>é™å®šèŒƒå›´ã€‚</p>
        <p>ä½¿ç”¨<code>.page(page, 10, 5)</code>å·²ç»è‡ªåŠ¨æ·»åŠ äº†<code>.limit(pos,offset)</code>é™å®šèŒƒå›´ï¼Œåªè¦ä¼ å…¥<code>page</code>é¡µç ã€‚</p>
        <pre><code class="language-C++">auto [bar_min, bar_max, current_page, total_page] = artmodel.page(page, 10, 5);

        client.val[&quot;pageinfo&quot;].set_object();
        client.val[&quot;pageinfo&quot;][&quot;min&quot;]     = bar_min;
        client.val[&quot;pageinfo&quot;][&quot;max&quot;]     = bar_max;
        client.val[&quot;pageinfo&quot;][&quot;current&quot;] = current_page;
        client.val[&quot;pageinfo&quot;][&quot;total&quot;]   = total_page;
        </code></pre>
        <p><code>.page(page, 10, 5)</code> è¿”å›å››ä¸ªæ•°å€¼ï¼Œ<code>bar_min</code> <code>bar_max</code>ç”±ä¼ å…¥5å†³å®šèŒƒå›´ï¼Œ
        å°±æ˜¯å‰å2é¡µçª—å£ï¼Œæ¯é¡µ10ä¸ªï¼Œ</p>
        <p>ORM whereå…¶å®ƒæ–¹æ³•</p>
        <p><code>whereLike(fieldname,searchword)</code> å…¶å®å°±æ˜¯ and fieldname '%searchword%'è®¾ç½®<br />
        <code>whereAnd</code> å…¶å®å°±æ˜¯ and fieldname = val è®¾ç½®<br />
        <code>whereIn</code> å…¶å®å°±æ˜¯ and fieldname IN(val) è®¾ç½®</p>
      </div>

      <div class="container">
        <h3>paozhu æ¡†æ¶view è§†å›¾å…¥é—¨</h3>
        <p>paozhu åšä¸º c++ web framework æ¡†æ¶ å°±æ˜¯MVC æ¨¡å¼ï¼Œç°åœ¨å°±æ˜¯è¯´v è¿™ä¸ªè§†å›¾åŠŸèƒ½</p>
        <h4>1ã€è§†å›¾è¯´æ˜</h4>
        <p>å°±æ˜¯ç»™æµè§ˆå™¨æ˜¾ç¤ºçš„å†…å®¹ï¼Œå…¶å®å°±æ˜¯HTMLå†…å®¹ï¼Œç±»ä¼¼PHPè„šæœ¬è¯­è¨€è¾“å‡ºï¼Œé‚£æˆ‘ä»¬C++æ€ä¹ˆæ“ä½œå‘¢ï¼Œä¹Ÿæ˜¯åœ¨HTMLé‡Œé¢æ”¾C++ ä»£ç ï¼Œç„¶åç¼–è¯‘æˆä¸ºC++çš„.cppæ–‡ä»¶ï¼Œå¸¸é©»å†…å­˜ï¼Œè¿™æ ·é€Ÿåº¦ä¹Ÿå¾ˆå¿«ï¼Œå‡ ç™¾ä¸ªè§†å›¾æ–‡ä»¶åªè¦å‡ Må†…å­˜ï¼Œä¸€ä¸ªå…¬å¸é¡¹ç›®ä¹Ÿå°±æ˜¯1000å·¦å³é¡µé¢ã€‚ä¼°è®¡ä¸åˆ°10Må†…å­˜ï¼Œå¦‚æœç”¨è„šæœ¬è¯­è¨€è¿è¡Œæ—¶ä¼šè¿˜è¦å¤§é‡ioè¯»å–æ–‡ä»¶ã€‚ æ¡†æ¶ç›´æ¥ç¼–è¯‘å…¶ä¸ºç¨‹åºï¼Œä¸ç”¨ioè¯»å–äº†ï¼Œé€Ÿåº¦æå¿«ã€‚</p>
        <h4>2ã€åˆ›å»ºè§†å›¾</h4>
        <p>æˆ‘ä»¬åœ¨viewç›®å½•</p>
        <p>åˆ›å»º login ç›®å½• ç„¶åå†åˆ›å»ºä¸€ä¸ªlogin.htmlæ–‡ä»¶åœ¨loginç›®å½•é‡Œé¢</p>
        <p>view</p>
        <ul>
        <li>login
        <ul>
        <li>login.html</li>
        </ul>
        </li>
        </ul>
        <p>å¤§æ¦‚è¿™æ ·å­</p>
        <h4>login.html æ–‡ä»¶å†…å®¹</h4>
        <pre><code class="language-html">&lt;!doctype html&gt;
        &lt;html lang=&quot;en&quot;&gt;
          &lt;head&gt;
            &lt;meta charset=&quot;utf-8&quot;&gt;
            &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;
            &lt;meta name=&quot;description&quot; content=&quot;&quot;&gt;
            &lt;meta name=&quot;author&quot; content=&quot;Mark Otto, Jacob Thornton, and Bootstrap contributors&quot;&gt;
            &lt;meta name=&quot;generator&quot; content=&quot;Hugo 0.101.0&quot;&gt;
            &lt;title&gt;Content Management System&lt;/title&gt;
        
            &lt;link href=&quot;/assets/dist/css/bootstrap.min.css&quot; rel=&quot;stylesheet&quot;&gt;
          &lt;/head&gt;
          &lt;body class=&quot;text-center&quot;&gt;
            &lt;%c include_sub(&quot;home/header&quot;,obj); %&gt;
            &lt;div class=&quot;container text-center&quot;&gt;
              &lt;div class=&quot;row&quot;&gt;
                &lt;div class=&quot;col-3&quot;&gt;&lt;/div&gt;  
                &lt;div class=&quot;col-6&quot;&gt;
                  &lt;h2 id=&quot;horizontal-form&quot;&gt;CMS Admin &lt;/h2&gt;
                  &lt;form action=&quot;/cms/loginpost&quot; method=&quot;post&quot;&gt;
                    &lt;div class=&quot;row mb-3&quot;&gt;
                      &lt;label for=&quot;username&quot; class=&quot;col-sm-2 col-form-label&quot;&gt;Username&lt;/label&gt;
                      &lt;div class=&quot;col-sm-10&quot;&gt;
                        &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;username&quot; name=&quot;username&quot; value=&quot;admin&quot;&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div class=&quot;row mb-3&quot;&gt;
                      &lt;label for=&quot;password&quot; class=&quot;col-sm-2 col-form-label&quot;&gt;Password&lt;/label&gt;
                      &lt;div class=&quot;col-sm-10&quot;&gt;
                        &lt;input type=&quot;password&quot; class=&quot;form-control&quot; id=&quot;password&quot; name=&quot;password&quot; value=&quot;123456&quot;&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;
        
                    &lt;button type=&quot;submit&quot; class=&quot;btn btn-primary&quot;&gt;Sign in&lt;/button&gt;
                  &lt;/form&gt;
              
                &lt;/div&gt;
         
              &lt;/div&gt;
            &lt;/div&gt;
        
          &lt;/body&gt;
          &lt;/html&gt;
        
        
        </code></pre>
        <p>include_sub(&quot;home/header&quot;,obj);</p>
        <p>è¯´æ˜è¿˜åŒ…æ‹¬ä¸€ä¸ªå­é¡µé¢ï¼Œæˆ‘ä»¬å†åœ¨viewåˆ›å»ºä¸€ä¸ªå­é¡µé¢ç›®å½•home</p>
        <p>view</p>
        <ul>
        <li>home
        <ul>
        <li>header.html</li>
        </ul>
        </li>
        <li>login
        <ul>
        <li>login.html</li>
        </ul>
        </li>
        </ul>
        <p>å¤§æ¦‚è¿™æ ·å­</p>
        <h4>header.html å†…å®¹å…¶å®å°±æ˜¯ç½‘é¡µå¤´éƒ¨ä¿¡æ¯</h4>
        <pre><code class="language-html">
        &lt;style&gt;
          ul {
              list-style-type: none;
              margin: 0;
              padding: 0;
              overflow: hidden;
              background-color: #333;
          }
          
          li {
              float: left;
              border-right:1px solid #bbb;
          }
          
          li:last-child {
              border-right: none;
          }
          
          li a {
              display: block;
              color: white;
              text-align: center;
              padding: 14px 16px;
              text-decoration: none;
          }
          
          li a:hover:not(.active) {
              background-color: #111;
          }
          
          .active {
              background-color: #4CAF50;
          }
          &lt;/style&gt;
        &lt;ul&gt;
          &lt;li&gt;&lt;a class=&quot;active&quot; href=&quot;/&quot;&gt;ä¸»é¡µ&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#news&quot;&gt;æ–°é—»&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#contact&quot;&gt;è”ç³»&lt;/a&gt;&lt;/li&gt;
          &lt;li style=&quot;float:right&quot;&gt;&lt;a href=&quot;#about&quot;&gt;å…³äº&lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt;
        
        &lt;h3&gt;å­é¡µé¢é¡µé¢include_sub(&quot;home/header&quot;)å¯¼èˆªæµ‹è¯• |&lt;%c echo&lt;&lt;vinfo.get[&quot;aa&quot;].to_string(); %&gt;| &lt;/h3&gt;
             
         
        </code></pre>
        <p>echo&lt;&lt;vinfo.get[&quot;aa&quot;].to_string();</p>
        <p>è¿™ä¸ªå°±æ˜¯ è§†å›¾æ ‡ç­¾ c++ ä»£ç ç”¨&lt;%c %&gt;åŒ…æ‹¬èµ·æ¥</p>
        <p>echo æ˜¯ç¼“å†²åŒºï¼Œå°±æ˜¯è·Ÿå¤–é¢htmlä¸€èµ·æ‹¼èµ·æ¥</p>
        <p>å˜æˆc++ä»£ç </p>
        <p>æ˜¯è¿™æ ·å­</p>
        <p>echo&lt;&lt;&quot;å¯¼èˆªæµ‹è¯• |&quot;;</p>
        <p>echo&lt;&lt;vinfo.get[&quot;aa&quot;].to_string();</p>
        <p>echo&lt;&lt;&quot;| &lt;/h3&gt;&quot;;</p>
        <p>å…·ä½“å¯ä»¥çœ‹viewsrc/view/home/header.cppä»£ç ã€‚</p>
        <h4>3ã€ ç¼–è¯‘è§†å›¾åˆ°cppæ–‡ä»¶</h4>
        <p>åœ¨ç½‘ç«™æ ¹ç›®å½•ä¸‹è¿è¡Œ</p>
        <p>./bin/paozhu_cli</p>
        <p>é€‰æ‹©f ç”Ÿæˆæ–‡ä»¶</p>
        <pre><code class="language-c++">
        ./bin/paozhu_cli
        ./bin/paozhu_cli  model ï½œ view | viewtocpp | control   
         ğŸ‰ Welcome to use cli to manage your MVC filesã€‚
        (m)model (v)view (f)viewtocpp or (c)control,x or q to exit[input m|v|f|c|]:f
         ğŸ„ current path: /Users/hzq/paozhu
        1 [+] view/home/header.html 	 time: 2022-12-12 13:1:41
        2 [+] view/login/login.html 	 time: 2022-12-12 13:1:26
         please input number to parse to cpp file.
         a update all , example: 1 3 4 5 enter key, q or x to exit,r reload 
         input number:a
        
        </code></pre>
        <p>æˆ‘ä»¬å…ˆç”¨f,ç›´æ¥è·Ÿæ¡†æ¶ä¸€èµ·ç¼–è¯‘çš„æ–¹æ³•ã€‚</p>
        <p>ç„¶åé€‰æ‹©a,æ‰€æœ‰ä¿®æ”¹æˆ–æ–°å»ºçš„è§†å›¾æ–‡ä»¶éƒ½è½¬åŒ–ä¸ºcppæ–‡ä»¶</p>
        <p>æ–‡ä»¶ä¿å­˜åœ¨ viewsrcç›®å½•</p>
        <p>viewsrc</p>
        <ul>
        <li>
        <p>view</p>
        <ul>
        <li>login
        <ul>
        <li>login.cpp</li>
        </ul>
        </li>
        <li>home
        <ul>
        <li>header.cpp</li>
        </ul>
        </li>
        </ul>
        </li>
        <li>
        <p>include</p>
        <ul>
        <li>viewsrc.h</li>
        <li>regviewmethod.hpp</li>
        </ul>
        </li>
        </ul>
        <p>å¤§æ¦‚è¿™æ ·</p>
        <p>æˆ‘ä»¬ä¸¤ä¸ª login.html header.htmlå·²ç»è½¬ä¸ºcppæ–‡ä»¶</p>
        <p>include ç›®å½•é‡Œé¢ä¸¤ä¸ªæ–‡ä»¶</p>
        <p>viewsrc.h æ˜¯æ‰€æœ‰è§†å›¾æ–‡ä»¶å‡½æ•°çš„å®šä¹‰ï¼Œä»¥åå¯èƒ½ä¼šåˆ†å¼€ï¼Œä¸€ä¸ªè§†å›¾æ–‡ä»¶å¯¹ä¸€ä¸ªå¤´æ–‡ä»¶ã€‚</p>
        <p>regviewmethod.hpp æ˜¯è§†å›¾æ³¨å†Œå‡½æ•°ï¼Œæ¡†æ¶è°ƒç”¨è¿™ä¸ªæ³¨å†Œåˆ°æ¡†æ¶</p>
        <h4>viewsrc.h æ–‡ä»¶å†…å®¹</h4>
        <pre><code class="language-c++">
        #ifndef __HTTP_VIEWSRC_ALL_METHOD_H
        #define __HTTP_VIEWSRC_ALL_METHOD_H
        
        #if defined(_MSC_VER) &amp;&amp; (_MSC_VER &gt;= 1200)
        #pragma once
        #endif // defined(_MSC_VER) &amp;&amp; (_MSC_VER &gt;= 1200)
        
        #include&lt;string&gt;
        #include&lt;map&gt;
        #include&lt;functional&gt;
        #include &quot;request.h&quot;
        #include &quot;viewso_param.h&quot;
        
        namespace http { 
        namespace view { 
        
        namespace home{ 
        
            std::string header(const struct view_param &amp;vinfo,http::obj_val &amp;obj);
        }
        
        namespace login{ 
        
            std::string login(const struct view_param &amp;vinfo,http::obj_val &amp;obj);
        }
        
        
        }
        
        }
        #endif
        
        </code></pre>
        <p>å¯ä»¥çœ‹åˆ°è§†å›¾éƒ½æ”¾åœ¨å‘½åç©ºé—´é‡Œé¢ï¼Œè¿™æ ·ï¼Œä¸€ä¸ªç›®å½•é‡Œé¢å’Œå…¶å®ƒç›®å½•é‡Œé¢è§†å›¾æ–‡ä»¶é‡åä¹Ÿæ²¡æœ‰å†²çªã€‚</p>
        <h4>regviewmethod.hpp æ³¨å†Œå‡½æ•°æ–‡ä»¶</h4>
        <pre><code class="language-c++">
        #ifndef __HTTP_REG_VIEW_METHOD_HPP
        #define __HTTP_REG_VIEW_METHOD_HPP
        
        #if defined(_MSC_VER) &amp;&amp; (_MSC_VER &gt;= 1200)
        #pragma once
        #endif // defined(_MSC_VER) &amp;&amp; (_MSC_VER &gt;= 1200)
        
        #include&lt;string&gt;
        #include&lt;map&gt;
        #include&lt;functional&gt;
        #include &quot;request.h&quot;
        #include &quot;viewso_param.h&quot;
        #include &quot;viewmethold_reg.h&quot;
        #include &quot;viewsrc.h&quot;
        
        namespace http
        {
          void _initview_method_regto(VIEW_REG  &amp;_viewmetholdreg)
          {
                         //create time: Mon, 12 Dec 2022 05:01:53 GMT
        
            _viewmetholdreg.emplace(&quot;home/header&quot;,http::view::home::header);
            _viewmetholdreg.emplace(&quot;login/login&quot;,http::view::login::login);
        
            } 
        }
        #endif
        
        </code></pre>
        <p>ä¸¤ä¸ªå‡½æ•°æ³¨å†Œåˆ°å›è°ƒå‡½æ•°ä¸Šï¼Œå°±æ˜¯ä¸€ä¸ªè§†å›¾æ–‡ä»¶æ˜¯ä¸€ä¸ªå‡½æ•°</p>
        <p>ç›®å½•åå’Œæ–‡ä»¶å ç»„æˆä¸€ä¸ªæ³¨å†Œç‚¹</p>
        <p>login/login æ˜¯ä¸€ä¸ªæ³¨å†Œç‚¹</p>
        <p>æ§åˆ¶å™¨ peer-&gt;view(&quot;login/login&quot;); è°ƒç”¨æ–¹æ³•</p>
        <h4>4ã€ è§†å›¾æµ‹è¯•</h4>
        <p>æˆ‘ä»¬åˆ›å»ºå®Œè§†å›¾ï¼Œç°åœ¨æµ‹è¯•ä¸€ä¸‹</p>
        <p>æŒ‰ç…§hello worldå…¥é—¨é‚£ç« </p>
        <p><code>controller/src</code>ç›®å½• åˆ›å»º <code>testview.cpp</code> æ–‡ä»¶</p>
        <p>å¤§æ¦‚è¿™æ ·å­</p>
        <h4>testview.cpp</h4>
        <pre><code class="language-c++">#include &lt;chrono&gt;
        #include &lt;thread&gt;
        #include &quot;httppeer.h&quot;
        #include &quot;testview.h&quot;
        namespace http
        {
               //@urlpath(null,testview)
              std::string testloginview(std::shared_ptr&lt;httppeer&gt; peer)
              {
                    httppeer &amp;client = peer-&gt;getpeer();
                    client &lt;&lt; &quot; è§†å›¾æµ‹è¯• &quot;;
                    // client &lt;&lt; client.gethosturl();
                    // client&lt;&lt;&quot;&lt;p&gt;&lt;a href=\&quot;&quot;&lt;&lt;client.gethosturl()&lt;&lt;&quot;/showcookie\&quot;&gt;show&lt;/a&gt;&lt;/p&gt;&quot;;
        
                    peer-&gt;view(&quot;login/login&quot;);
                    return &quot;&quot;;
              }
        
        }
        
        </code></pre>
        <p>æŠŠ testview æ˜ å°„åˆ° testloginview ä¸Šï¼Œä¸¤ä¸ªåå­—å¯ä»¥ä¸ä¸€æ ·ã€‚</p>
        <p>å°±æ˜¯http://localhost/testview å¯ä»¥è®¿é—®æˆ‘ä»¬çš„testloginviewå‡½æ•°</p>
        <h4>5ã€ç¼–è¯‘</h4>
        <p>ä¸€åˆ‡å‡†å¤‡å°±ç»ªäº†ï¼Œæˆ‘ä»¬å¼€å§‹ç¼–è¯‘</p>
        <p>å›åˆ°é¡¹ç›®æ ¹ç›®å½•è¿›å…¥buildç›®å½•</p>
        <p>cmake ..</p>
        <p>make</p>
        <p>ç„¶ååœ¨å›åˆ°æ ¹ç›®å½•ï¼Œæˆ–æ‰“å¼€æ–°çš„å‘½ä»¤çª—å£</p>
        <p>æ‰§è¡Œ</p>
        <p>./bin/paozhu #åœ¨Linux ä½¿ç”¨ sudo ./bin/paozhu </p>
        <p>ç”¨æµè§ˆå™¨æ‰“å¼€</p>
        <p>http://localhost/testview</p>
        <p>å¯ä»¥çœ‹åˆ°è§†å›¾å†…å®¹äº†</p>

      </div>   
      <div class="container">

        <h3>C++ç”Ÿäº§ç¯å¢ƒæ•…éšœæ’æŸ¥</h3>
        <p>æ¡†æ¶å¼€å¯äº†ASANï¼Œå¦‚æœåœ¨è°ƒè¯•æ—¶å€™è¢«ASANæ£€æµ‹åˆ°ä¼šæŒ‡å‡ºå“ªä¸€è¡Œæœ‰é—®é¢˜ã€‚</p>
        <p>ç”Ÿäº§ç¯å¢ƒå› ä¸ºæ²¡æœ‰è¾“å‡ºåŸå› ï¼Œéš¾ä»¥çœ‹åˆ°ã€‚</p>
        <p>ç”Ÿäº§ç¯å¢ƒç¼–è¯‘å‚æ•°æ˜¯</p>
        <pre><code class="language-shell">mkdir build
        cd build
        cmake .. -DCMAKE_BUILD_TYPE=Release #OR cmake .. -DCMAKE_BUILD_TYPE=Release -DENABLE_GD=ON
        make -j8
        </code></pre>
        <p>éœ€è¦å®‰è£…gdb coredumpctl</p>
        <p>æ¡†æ¶ä¼šéš”1åˆ†é’Ÿå·¦å³æ£€æŸ¥ <code>log</code> ç›®å½•æ˜¯å¦æœ‰<code>restart_server</code>æ–‡ä»¶</p>
        <p>å¦‚æœæˆ‘ä»¬éœ€è¦å–ç°åœ¨çº¿ç¨‹æ ˆæ ·å“ï¼Œå¯ä»¥ <code>touch log/restart_server</code> è¿™æ ·å¯ä»¥è®©è¿›ç¨‹é‡å¯</p>
        <p>å¯ä»¥ä½¿ç”¨<code>pstree -aup</code> æŸ¥çœ‹è¿›ç¨‹æƒ…å†µ</p>
        <p>å¦‚æœå·²ç»å–æ ·ï¼Œéœ€è¦åˆ†æè¿›ç¨‹æ ˆæƒ…å†µ</p>
        <p>æ ¸å¿ƒcoredumpæŸ¥çœ‹</p>
        <pre><code>coredumpctl list
        coredumpctl info
        </code></pre>
        <p>ç›´æ¥åœ¨çº¿çœ‹,1524æ˜¯ info æ˜¾ç¤ºçš„è¿›ç¨‹å·ï¼Œä¹Ÿå°±æ˜¯ä¹‹å‰<code>pstree -aup</code> çœ‹çš„</p>
        <pre><code>coredumpctl gdb 1524</code></pre>
        <p><code>bt</code>å¯ä»¥æŸ¥çœ‹</p>
        <p>è¿›å»åæˆ‘ä»¬å¯ä»¥ä¿å­˜å‡ºæ¥çœ‹ï¼Œä¿å­˜åœ¨å½“å‰ç›®å‰ <code>thread_info.txt</code>æ–‡ä»¶ã€‚</p>
        <pre><code>
        set logging file thread_info.txt
        set logging enabled on
        thread apply all bt
        set logging enabled off
        </code></pre>
        <p>æ ¸å¿ƒcoredumpä¸€èˆ¬åœ¨</p>
        <pre><code>/var/lib/systemd/coredump
        </code></pre>

        <p>å¦‚æœç¼–è¯‘ä½¿ç”¨-g é‚£ä¹ˆä¼šçœ‹åˆ°ç±»ä¼¼ä¸‹é¢æ ·å­ï¼Œä¸€èˆ¬ä¼šæ˜¾ç¤ºå„ç§çº¿ç¨‹ç›®å‰æ­£åœ¨å¹²ä»€ä¹ˆäº‹</p>

        <pre><code>Thread 17 (Thread 0x7fd9f16b9640 (LWP 10658)):
          #0  http::hash_objkey (key=&quot;data:image/php;base64,PD9waHAgJE8wME9PMD11cmxkZWNvZGUoIiU3OCUzNCU2My&quot;...) at /www/paozhu/vendor/httpserver/src/request.cpp:54
          #1  0x000000000060032f in http::obj_val::operator[] (this=0x7fd9cc01e520, key=&quot;data:image/php;base64,PD9waHAgJE8wME9PMD11cmxkZWNvZGUoIiU3OCUzNCU2MyU2RiUyRiU3MCUzOSU3OSU3MSU2RSU2NCUyRCU2QyU3MiU2QiU2NCU2NyU1RiU&quot;...) at /www/paozhu/vendor/httpserver/src/request.cpp:315
          #2  0x00000000005a990c in http::httpparse::procssxformurlencoded (this=0x7fd9b400d370) at /www/paozhu/vendor/httpserver/src/http_parse.cpp:389
          #3  0x00000000005b1bfa in http::httpparse::process (this=0x7fd9b400d370, buffer=0x2e223c0 &quot;POST /public/static/lib/webuploader/0.1.5/server/preview.php HTTP/1.1\r\nHost: www. paozhu.org\r\nUser-Agent: Mozilla/5.0 AppleWebKit/601.1.46 (KHTML, like Gecko) Version/9.0\r\nAccept-Encoding: gzip, deflate&quot;..., buffersize=964) at /www/paozhu/vendor/httpserver/src/http_parse.cpp:2823
          </code></pre>
          <p><a href="CMakeLists_debug_product.txt">Reference to CMakeLists.txt</a></p>
    </div>
</body>

</html>