æ–‡ä»¶ä½ç½® conf/orm.conf

[default]
type=main
host=127.0.0.1
port=3306
dbname=hello_world
user=benchmarkdbuser
password=benchmarkdbpass
pretable=
maxpool=5
dbtype=mysql
#ssl=ON

type=second
host=127.0.0.1
port=3306
dbname=hello_world
user=benchmarkdbuser
password=benchmarkdbpass
pretable=
maxpool=20
dbtype=mysql
#ssl=ON

ORM é…ç½®
type ä¸ºç±»å‹ å°±æ˜¯ä¸»ä»åˆ†ç¦»ï¼Œä»¥åå¯ä»¥å¼€å‘ç¼“å­˜åŒæ­¥ï¼Œç›®å‰å…ˆä¸»ä»ã€‚host 127.0.0.1 å¡«æœ¬åœ°çš„åœ°å€ï¼ŒMySQLå¿…é¡»å¤§äºç­‰äº8ç‰ˆæœ¬ï¼Œå› ä¸ºMySQL9ä¸æ”¯æŒæ—§çš„è®¤è¯äº†ï¼Œ
pretable æ˜¯è¡¨å‰ç¼€ï¼Œæœ‰æ—¶å€™åªæœ‰ä¸€ä¸ªæ•°æ®åº“æƒé™å¯ä»¥ä¸€ä¸ªæ•°æ®åº“æ”¾å¤šä¸ªä¸šåŠ¡ã€‚
dbtype ç›®å‰æ”¯æŒMySQLã€‚
ssl å¯ä»¥æ‰“å¼€ï¼Œç‰¹åˆ«æ˜¯è¿œç¨‹è¿æ¥æ—¶å€™ï¼Œå¯ç”¨åŠ å¯†è¿æ¥ã€‚æœ¬åœ°çš„ä¸ä¼šå¯ç”¨sslè¿æ¥ã€‚

ORM ä½¿ç”¨å…¥é—¨

æ¡†æ¶ç›®å‰æ”¯æŒæ•°æ®åº“åˆ°æ–‡ä»¶æ–¹å¼ï¼Œè¿™æ ·ä¿®æ”¹æ•°æ®åº“å¯ä»¥é‡æ–°ç”ŸæˆORMæ–‡ä»¶ã€‚
ç¼–è¯‘æˆåŠŸå

# ./bin/paozhu_cli 

paozhu_cli(1495,0x7ff85ac38fc0) malloc: nano zone abandoned due to inability to reserve vm space.
  model ï½œ view | viewtocpp | control   
 Welcome to use cli to manage your MVC filesã€‚
(m)model (v)view (f)viewtocpp or (c)control , (j)son ,x or q to exit[input m|v|f|c|j|]:

è¾“å…¥ m é€‰æ‹©ç”ŸæˆORMæ¨¡å‹æ–‡ä»¶

paozhu_cli(1495,0x7ff85ac38fc0) malloc: nano zone abandoned due to inability to reserve vm space.
  model ï½œ view | viewtocpp | control   
 Welcome to use cli to manage your MVC filesã€‚
(m)model (v)view (f)viewtocpp or (c)control , (j)son ,x or q to exit[input m|v|f|c|j|]:m   
 ğŸ„ current path: /Users/hzq/paozhu
 1 hello_world
 3 paozhu_docs
 5 cppcms
select db index:

è¾“å…¥ 1 é€‰æ‹© hello_world æ•°æ®åº“ç”Ÿæˆæ–‡ä»¶ã€‚

paozhu_cli(1495,0x7ff85ac38fc0) malloc: nano zone abandoned due to inability to reserve vm space.
  model ï½œ view | viewtocpp | control   
 Welcome to use cli to manage your MVC filesã€‚
(m)model (v)view (f)viewtocpp or (c)control , (j)son ,x or q to exit[input m|v|f|c|j|]:m
 ğŸ„ current path: /Users/hzq/paozhu
 1 hello_world
 3 paozhu_docs
 5 cppcms
select db index:1
show tables;
create fortune table to models ğŸš—
 create table metainfo file: /Users/hzq/paozhu/orm/include/fortunebase.h
create world table to models ğŸš—
 create table metainfo file: /Users/hzq/paozhu/orm/include/worldbase.h
(m)model (v)view (f)viewtocpp or (c)control , (j)son ,x or q to exit[input m|v|f|c|j|]:x

è¾“å…¥ x é€€å‡º

å¯ä»¥çœ‹åˆ° /Users/hzq/paozhu/orm ç›®å½•ä¸‹ç”Ÿæˆæ–‡ä»¶
orm
â”œâ”€â”€ include
â”‚Â Â  â”œâ”€â”€ fortune_mysql.h
â”‚Â Â  â”œâ”€â”€ fortunebase.h
â”‚Â Â  â”œâ”€â”€ world_mysql.h
â”‚Â Â  â””â”€â”€ worldbase.h
â”œâ”€â”€ orm.h
â”‚
models
â”œâ”€â”€ Fortune.cpp
â”œâ”€â”€ World.cpp
â””â”€â”€ include
    â”œâ”€â”€ Fortune.h
    â””â”€â”€ World.h

ORMç›®å½•æ˜¯å®ä½“æ–‡ä»¶ï¼Œä¸¤ä¸ªæ–‡ä»¶ä¸€ä¸ªæ˜¯mysqlè¿æ¥å±‚mysqlç»“å°¾ï¼Œä¸€ä¸ªæ˜¯æ•°æ®è¡¨å®ä½“æ˜ å°„base.hç»“å°¾ã€‚
æˆ‘ä»¬å…¶å®æ˜¯æ“ä½œmodelsç›®å½•ä¸‹ORMæ–‡ä»¶ï¼Œè¿™ä¸¤ä¸ªæ–‡ä»¶ä¸€ä¸ªcppä¸€ä¸ªhæ–‡ä»¶ï¼Œè‡ªåŠ¨ç”Ÿæˆï¼Œ
ä½†æ˜¯åªç”Ÿæˆä¸€æ¬¡ï¼Œæœ‰äº†ä¸ä¼šè¦†ç›–ï¼Œå› ä¸ºçœŸæ­£ä¸šåŠ¡ç³»ç»Ÿå¯ä»¥è‡ªå·±åŠ ä¸šåŠ¡ä»£ç åœ¨é‡Œé¢ã€‚

æ¯”å¦‚
auto myworld = orm::World();
å°±æ˜¯ models ç›®å½•ä¸‹ World.h
è¿™ä¸ªæ˜¯é»˜è®¤æ•°æ®åº“ï¼Œæ¯”å¦‚è‡ªå¸¦cmsæ¼”ç¤º
auto users = orm::cms::Sysuser();

ormæ˜¯å‘½åç©ºé—´ï¼Œä¸»è¦æ˜¯ç»™ORMç”¨
cmsæ˜¯orm.confæ•°æ®åº“é…ç½®æ ‡ç­¾ï¼Œä¹Ÿæ˜¯ç”Ÿæˆçš„cmså‘½åç©ºé—´ï¼Œæ–¹ä¾¿éš”ç¦»å’Œè½¬æ¢æ•°æ®åº“ï¼Œå¦‚æœæ˜¯[default]å¯ä»¥çœç•¥defaut.
ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡å‘¢ï¼Œ
ä¸€ä¸ªæ˜¯ä¸€ä¸ªæ•°æ®åº“å¯ä»¥æœ‰å¤šä¸ªè¿æ¥ï¼Œè¿™æ ·æˆ‘ä»¬ä¸çŸ¥é“ä½¿ç”¨é‚£ä¸ªè¿æ¥ã€‚
ä¸€ä¸ªæ˜¯æ•°æ®åº“åå­—å¾ˆé•¿ï¼Œåƒäº‘ä¸»æœºå¯èƒ½è‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªå‡ åä¸ªå­—ç¬¦é•¿çš„æ•°æ®åº“åï¼Œç”šè‡³æœ‰ä¸‹åˆ’çº¿çš„ã€‚
ä¸€ä¸ªæ˜¯å¯ä»¥ä¸ªæ€§æ ‡ç­¾ï¼Œè¿™æ ·æ•°æ®åº“æ˜¯ä»€ä¹ˆåä¸é‡è¦äº†ã€‚
ä¸€ä¸ªæ˜¯æˆ‘ä»¬ç”¨æ¥åšå‘½åç©ºé—´éš”ç¦»è¡¨å¯¹è±¡ï¼Œè¿™æ ·å¾ˆå¤šæ•°æ®åº“ç”Ÿæˆçš„C++ç±»ä¸ä¼šå†²çªã€‚

æ‰€ä»¥orm::cms::Sysuser();ä½¿ç”¨cmséš”ç¦»äº†sysuserè¡¨å®ä½“C++ç±»ï¼Œä¸ä¼šä¸å…¶å®ƒæ•°æ®åº“åŒåè¡¨æœ‰å†²çªã€‚
æ¯”å¦‚orm::erp::Sysuser();erpæ˜¯erpæ•°æ®åº“æ ‡ç­¾ï¼Œä»–çš„æ•°æ®åº“æ˜¯ä»€ä¹ˆåä¸é‡è¦ï¼Œ
å°±æ˜¯åŒæ ·æœ‰sysuserè¡¨ä¹Ÿæ²¡æœ‰å…³ç³»ã€‚

ä¹‹æ‰€ä»¥è¿™æ ·è®¾è®¡ï¼Œå°±æ˜¯ä¸€ä¸ªä¸šåŠ¡ç³»ç»Ÿï¼Œä¸€ä¸ªå•ä½“æœåŠ¡å™¨ç¨‹åºï¼Œå¯ä»¥æœ‰å¾ˆå¤šæ•°æ®åº“ï¼Œè€Œä¸”ä»–ä»¬è¡¨åå¯ä»¥æœ‰é‡åã€‚
ä»¥åå¯ä»¥æœ‰ä¸åŒæ•°æ®åº“ï¼Œæ¯”å¦‚MySQL PGç­‰ï¼Œä»–ä»¬å¯ä»¥åˆ†å¸ƒåœ¨å…¶å®ƒæœºå™¨ä¸Šã€‚
ä»–ä»¬å¯ä»¥æ··åˆé›†ç¾¤ï¼Œä¸€ä¸ªå•ä½“æœåŠ¡å™¨ç¨‹åºä¹Ÿå¯ä»¥é›†ç¾¤ï¼Œå› ä¸ºå†…ç½®äº†è¯»å†™åˆ†ç¦»ï¼Œæ‰€ä»¥æ¡†æ¶å¯ä»¥é€‚åˆå¤§ä¸šåŠ¡ç³»ç»Ÿã€‚

